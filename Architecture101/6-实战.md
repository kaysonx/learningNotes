# 从0开始学架构 - 实战

### 如何判断技术演进的方向

典型派别：

1. 潮流派 - 热衷于新技术
   * 新技术 各种坑
   * 需要学习 需要时间成本 而且不知道是否试用
2. 保守派 - 稳定压倒一切 > 如果你手里有一把锤子，那么所有的问题都变成了钉子
   * 很多新技术带来的收益是爆发性的变化的
3. 跟风派 - 看竞争对手
   * 得到的信息不全面
   * 可能自己是领头羊



技术演进的动力：

核心是 - 企业的业务发展

影响一个企业业务发展有3个因素：市场 管理 技术

这里讨论技术和业务之间的关系



先说结论：

产品类业务：技术创新推动业务发展 例如360杀毒软件 iPhone UC浏览器

服务类应用：业务发展推动技术的发展 例如百度搜索 淘宝购物 微博 QQ

原因是：

用户选择服务的根本驱动是其规模

用户选择产品的根本驱动是其功能



技术演进的模式：

基于业务发展阶段进行判断 - 找出业务的复杂度



### 互联网技术演进的模式

互联网业务发展时期：初创期 发展期 竞争期 成熟期

不同时期的差别在于：业务复杂性 用户规模



**业务复杂性**

1. 初创期 - 创新 + 快
2. 发展期 - 快
   1. 堆功能期
   2. 优化期
   3. 架构期
3. 竞争期 - 
   1. 重复造轮子
   2. 系统交互一团乱麻
   3. 解决方法
      1. 平台化
      2. 服务化
4. 成熟期 - 精



**用户规模**

用户量增大对技术的影响主要体现在两个方面 - 性能要求越来越高 可用性要求越来越高



### 互联网架构模板

![img](/Users/qspeng/Documents/learningNotes/Architecture101/pics/InternetA.png)



#### 存储层技术

1. SQL
   * 发展到一定阶段后 通常会将数据拆分 组合等用中间件实现

2. NoSQL
   * 会在其集群之上构建同一存储平台
     * 资源动态按需分配
     * 资源自动化管理
     * 故障自动化管理
3. 小文件存储 - 海量存储和访问
4. 大文件存储 - 大数据平台



#### 开发层和服务层技术

**开发层技术**

1.开发框架

优选成熟的框架 避免盲目追逐新技术

成熟的框架资料文档齐备 各种坑已经被躺过 方便搜索问题

成熟的框架受众更广 招聘时容易招到合适的人才

成熟的框架更加稳定 不会出现大的变动 适合长期发展

2.Web服务器

一般使用开源

3.容器



**服务层技术**

主要目标是降低系统间相互关联的复杂度

1.配置中心

2.服务中心

1. 服务名字系统 类似于 DNS 
2. 服务总线系统 - 类似于计算机总线，油总线系统完成调用 服务请求方不需要和服务提供方交互了

3.消息队列



#### 网络层技术

1. 负载均衡
   1. DNS
   2. 软件负载均衡 - Nginx LVS
   3. 硬件负载均衡 - F5
2. CDN
3. 多机房
4. 多中心



#### 用户层和服务层技术

**用户层技术**

1. 用户管理
   1. 单点登录 - 🌰cookie JSONP token > CAS
   2. 授权登录 - 🌰OAuth2.0
2. 消息推送 - 短信 邮件 站内信 App
   * App最难
     * 第三方提供服务
     * 自己实现
       * 海量设备和用户管理
       * 连接保活
       * 消息管理
3. 存储云和图片云

**业务层技术**

核心是 拆！

最终因为子系统的数量越来越多 又会合  - 虚拟业务域 类似于BFF层 聚合多种业务然后统一对外呈现



#### 平台技术

**运维平台**

核心流程： 配置 部署 监控 应急

核心要素：

1. 标准化
2. 平台化
3. 自动化
4. 可视化



**测试平台**

核心是自动化

1. 用例管理
2. 资源管理
3. 任务管理
4. 数据管理



**数据平台**

1. 数据管理
2. 数据分析
3. 数据应用



**管理平台**

核心是权限管理

1. 身份认证
2. 权限控制



### 架构重构





